@model TravelAgencyWebApp.ViewModels.Booking.CreateBookingViewModel
@{
	ViewData["Title"] = "Създаване на Резервация";
}
@* <head>
	<title>Дени Травел</title>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="description" content="Travelix Project">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="~/Content/styles/bootstrap4/bootstrap.min.css" asp-append-version="true" />
	<link href="~/Content/plugins/font-awesome-4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" asp-append-version="true" />
	<link rel="stylesheet" type="text/css" href="~/Content/styles/main_styles.css" asp-append-version="true" />
	<link rel="stylesheet" type="text/css" href="~/Content/styles/responsive.css" asp-append-version="true" />
</head> *@
<style>
	body {
		background-color: #f8f9fa; /* Light background */
	}

	.confirm-delete-container {
		background-color: #ffffff;
		padding: 30px;
		border-radius: 8px;
		box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
	}

	h2 {
		color: #343a40; /* Dark color for heading */
	}

	.btn-danger {
		background-color: #dc3545; /* Bootstrap Danger Button */
	}

	.btn-secondary {
		background-color: #6c757d; /* Bootstrap Secondary Button */
	}

	.btn {
		margin-right: 10px; /* Space between buttons */
	}
</style>
<div class="container mt-5">
	<h2 class="text-center mb-4">Резервация</h2>

	<!-- Offer Details Section -->
	<div class="border p-4 mb-4">
		@if (ViewBag.Offer != null)
		{
			<h4>@ViewBag.Offer.Title</h4>
			@if (!string.IsNullOrEmpty(ViewBag.Offer.ImageUrl))
			{
				<img src="@ViewBag.Offer.ImageUrl" alt="@ViewBag.Offer.Title" class="img-fluid" style="max-width: 300px; height: auto;" />
			}
			else
			{
				<p>Няма налична снимка за тази оферта.</p>
			}
			<p>Дати: от @ViewBag.Offer.CheckInDate.ToString("dd.MM.yyyy") до @ViewBag.Offer.CheckOutDate.ToString("dd.MM.yyyy")</p>
			<p>Цена: @($"{ViewBag.Offer.Price} лева")</p>
		}
		else
		{
		<p>Неуспешно зареждане на информацията за офертата.</p>
		}
	</div>

	<form asp-action="Create" method="post">
		  <input type="hidden" asp-for="OfferId" /> 
		   <input type="hidden" asp-for="UserId" /> 

		  <h5 class="mb-3">Основна информация</h5>
        <div class="form-row">
            <div class="form-group col-md-6">
                <label>Вашето Име</label>
                <input asp-for="UserFullName" class="form-control" placeholder="Вашето име" required readonly />
            </div>
			<div class="form-group col-md-6">
				<label asp-for="UserEmail" class="control-label">Имейл</label>
				<input asp-for="UserEmail" class="form-control" type="email" placeholder="example@domain.com" required />
				<span asp-validation-for="UserEmail" class="text-danger"></span>
			</div>
		</div>

		<div class="form-row">
			<div class="form-group col-md-6">
				<label asp-for="UserPhoneNumber" class="control-label">Телефон</label>
				<input asp-for="UserPhoneNumber" class="form-control" required placeholder="Въведете телефонен номер" />
				<span asp-validation-for="UserPhoneNumber" class="text-danger"></span>
			</div>
			<div class="form-group col-md-3">
				<label asp-for="CheckInDate" class="control-label">Дата на Настаняване</label>
				<input asp-for="CheckInDate" class="form-control" type="date" required />
				<span asp-validation-for="CheckInDate" class="text-danger"></span>
			</div>
			<div class="form-group col-md-3">
				<label asp-for="CheckOutDate" class="control-label">Дата на Освобождаване</label>
				<input asp-for="CheckOutDate" class="form-control" type="date" required />
				<span asp-validation-for="CheckOutDate" class="text-danger"></span>
			</div>
		</div>

		<div class="form-group">
			<div class="form-check">
				<input type="checkbox" class="form-check-input" id="terms" required>
				<label class="form-check-label" for="terms">Приемам общите условия за резервация.</label>
			</div>
		</div>

		<div class="text-center">
			<button type="submit" class="btn btn-success">Резервирай</button>
			<a asp-action="Index" class="btn btn-secondary">Отказ</a>
		</div>
	</form>
</div>

@section Scripts {
	<script>
		const checkInInput = document.querySelector('input[name="CheckInDate"]');
		const checkOutInput = document.querySelector('input[name="CheckOutDate"]');

		checkInInput.addEventListener('change', function () {
			const checkInDate = new Date(checkInInput.value);
			const minCheckOutDate = new Date(checkInDate);
			minCheckOutDate.setDate(minCheckOutDate.getDate() + 1); 

			checkOutInput.setAttribute('min', minCheckOutDate.toISOString().split("T")[0]); 

			if (checkOutInput.value && new Date(checkOutInput.value) < minCheckOutDate) {
				checkOutInput.value = ''; 
			}
		});
	</script>
}